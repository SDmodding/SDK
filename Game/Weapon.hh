#pragma once

#define Weapon_firearm 0x9C5D997C
#define Weapon_firearm_camera_pda 0xB3E9C5CB
#define Weapon_firearm_fireextinguisher_fireextinguisher 0xA7FF2A64
#define Weapon_firearm_pistol_45cal 0x227F1078
#define Weapon_firearm_pistol_45cal_taclight 0x55A129DE
#define Weapon_firearm_pistol_50cal 0xCBEAA147
#define Weapon_firearm_pistol_50cal_gold 0xA6EC8F10
#define Weapon_firearm_pistol_50cal_gold_hd 0x8AB5E646
#define Weapon_firearm_pistol_50cal_silver 0x519652A3
#define Weapon_firearm_pistol_9mm 0xBE5F68F9
#define Weapon_firearm_pistol_HandGun_Hitman001 0xB30E2914
#define Weapon_firearm_pistol_HandGun_JC2001 0x1B8570B9
#define Weapon_firearm_pistol_service 0xDD662148
#define Weapon_firearm_rifle_DLC_MGL 0xC8EFCEEF
#define Weapon_firearm_rifle_Rifle_DeusEx001 0x3F9A40AA
#define Weapon_firearm_rifle_assault 0x96B4ED64
#define Weapon_firearm_rifle_assault_dlc 0x9B574C84
#define Weapon_firearm_rifle_assault_taclight 0x14D4357D
#define Weapon_firearm_rifle_assault_vehiclemounted 0xF0E43AEC
#define Weapon_firearm_rifle_grenade 0x268A56C0
#define Weapon_firearm_rifle_grenade_hd 0x182FBEC
#define Weapon_firearm_rifle_turret 0xB2420CD5
#define Weapon_firearm_shotgun_antiriot_taclight 0x4680A61E
#define Weapon_firearm_shotgun_antiriotnolight 0x83E29E3A
#define Weapon_firearm_shotgun_hunter 0xDC0DD5C7
#define Weapon_firearm_shotgun_pump 0x46738290
#define Weapon_firearm_smg_45cal 0xB31A1ACD
#define Weapon_firearm_smg_45cal_gold 0x6523CD95
#define Weapon_firearm_smg_45cal_taclight 0x4C6CE8DA
#define Weapon_firearm_smg_machine_pistol 0x5A6DCEF7
#define Weapon_melee 0x4049E7ED
#define Weapon_melee_BagJacket001 0x8FBFED03
#define Weapon_melee_Basketball001 0xA47707CC
#define Weapon_melee_BeerBottle002 0x67A15553
#define Weapon_melee_BottleGourd001 0xAC9F513E
#define Weapon_melee_BottledSoftDrink001 0xA0803FBD
#define Weapon_melee_BottledSoftDrink001_A 0x2849A9E7
#define Weapon_melee_BottledSoftDrink001_B 0x250A8F3E
#define Weapon_melee_BroomFull001 0x88130B
#define Weapon_melee_BroomFull002 0xDCB35D2
#define Weapon_melee_BroomWeapon001 0xDC0830C0
#define Weapon_melee_BullPenis001 0x451F68C2
#define Weapon_melee_CellPhone001 0x32AC898E
#define Weapon_melee_Chair_BasicWooden002 0x27D7159C
#define Weapon_melee_Chair_MetalFolding001 0x858118F4
#define Weapon_melee_CombatFish001 0x311A940A
#define Weapon_melee_CookingPan001 0x5BF98914
#define Weapon_melee_CookingPot001 0x1A1A5FFB
#define Weapon_melee_CookingSpoon001 0x14F700D6
#define Weapon_melee_CookingWok001 0x49BE3651
#define Weapon_melee_DuffleBag001 0x7202B717
#define Weapon_melee_ElectroWeapon001 0xEAAAC81A
#define Weapon_melee_GameGuitar001 0x998E9B45
#define Weapon_melee_GroceryBag 0xF273BC86
#define Weapon_melee_GroceryBag_Hand 0xFB890455
#define Weapon_melee_HandGrinder001 0x21FC3040
#define Weapon_melee_HandcuffsHQ001 0xD4DB6200
#define Weapon_melee_Lime001 0x423B1C1
#define Weapon_melee_MacheteTong001 0x58788095
#define Weapon_melee_MissionCellPhone001 0x864344AE
#define Weapon_melee_Orange001 0x41D3CBEC
#define Weapon_melee_PaintCan001 0xC3CD66D3
#define Weapon_melee_PaintCan001_A 0x67625AFA
#define Weapon_melee_PaintCan001_B 0x6A217C23
#define Weapon_melee_PicketSign001 0xC4A02C3C
#define Weapon_melee_PicketSign002 0xC9E30AE5
#define Weapon_melee_PicketSign003 0xCD221752
#define Weapon_melee_PopCan_A 0x887690BB
#define Weapon_melee_PopCan_B 0x8535B662
#define Weapon_melee_PopCan_ShugaA 0x98D284FB
#define Weapon_melee_PopCan_ShugaB 0x9591A222
#define Weapon_melee_PopCan_ShugaC 0x9150BF95
#define Weapon_melee_PopCan_ShugaD 0x8F17EF90
#define Weapon_melee_Purse001_Elbow 0x98ACE464
#define Weapon_melee_Purse001_Hand 0xCE873DFE
#define Weapon_melee_Purse001_Shoulder 0xAC64F33E
#define Weapon_melee_Purse002 0x19A3AF03
#define Weapon_melee_Purse002_Elbow 0x49555C57
#define Weapon_melee_Purse002_Hand 0xE3FF2A76
#define Weapon_melee_Purse002_Shoulder 0x29140E20
#define Weapon_melee_PurseHand001_Elbow 0x2290B7CF
#define Weapon_melee_PurseHand001_Hand 0x8A1A83AB
#define Weapon_melee_RawFish001 0xFE9196F2
#define Weapon_melee_Shovel001 0xD015E543
#define Weapon_melee_StaffMonkeyKing001 0x4A742C53
#define Weapon_melee_SwordAnime001 0x792665D9
#define Weapon_melee_SwordTaiChi001 0x5BBCFC5C
#define Weapon_melee_TableLegClub001 0x5A872D01
#define Weapon_melee_TelescopingBaton001 0x2E96AFAC
#define Weapon_melee_Wrench001 0x97CEA3CC
#define Weapon_melee_bag 0x74EDC84B
#define Weapon_melee_baton 0x5B157C5C
#define Weapon_melee_beerbottle 0xA7DB576A
#define Weapon_melee_briefcase 0xF4FE75C8
#define Weapon_melee_briefcase_alum 0x61485C
#define Weapon_melee_briefcasealuminum 0xF58FE160
#define Weapon_melee_cane 0x212495FE
#define Weapon_melee_canewalking 0xFE18AD8B
#define Weapon_melee_carbomb 0xF29899C6
#define Weapon_melee_cleaver 0x90D8C505
#define Weapon_melee_cleaver_A 0xBC9C426D
#define Weapon_melee_cleaver_Gold 0x59ECD9D6
#define Weapon_melee_crowbar 0x1EED9144
#define Weapon_melee_hackbroom 0x4DCFBDEA
#define Weapon_melee_hammer 0x6907014E
#define Weapon_melee_kitchenknife 0xD921A7C0
#define Weapon_melee_nightstick 0xD6BDB1CB
#define Weapon_melee_popcan 0x6D4866AA
#define Weapon_melee_purse 0x31990577
#define Weapon_melee_pursehand 0x69B35AE1
#define Weapon_melee_scrubbrush 0x9BED788E
#define Weapon_melee_squeegee 0x2D19077F
#define Weapon_melee_stickbamboo 0x63A4388C
#define Weapon_melee_sticktree 0xB0AC15E4
#define Weapon_melee_throwable 0x75F53C8D
#define Weapon_melee_tireiron 0xE0F0B624
#define Weapon_melee_umbrella 0x949A4909
#define Weapon_melee_woodenclub 0xE9CF6133
#define Weapon_melee_woodenstick 0xE4F78CAD

namespace UFG
{
	class CWeaponManager
	{
	public:
		struct WeaponEntry_t
		{
			float mScore;
			float mSpawnTime;
			float mTimeAlive;
			float mDistFromPlayer;
			bool mEquipped;
			qSafePointer<CSimWeaponPropertiesComponent> mComponent;
		};
		qArray<WeaponEntry_t> mElements;

		static UFG_INLINE CWeaponManager* Instance()
		{
			return *reinterpret_cast<CWeaponManager**>(UFG_RVA(0x2401618));
		}

		UFG_INLINE void FastDelete(uint32_t p_Index)
		{
			reinterpret_cast<void(__fastcall*)(qArray<WeaponEntry_t>*, uint32_t)>(UFG_RVA(0x43CAE0))(&mElements, p_Index);
		}

		UFG_INLINE void AddWeapon(CSimWeaponPropertiesComponent* p_WeaponProperties)
		{
			reinterpret_cast<void(__fastcall*)(void*, CSimWeaponPropertiesComponent*)>(UFG_RVA(0x438920))(this, p_WeaponProperties);
		}

		bool RemoveWeapon(CSimWeaponPropertiesComponent* p_WeaponProperties)
		{
			for (uint32_t i = 0; mElements.size > i; ++i)
			{
				if (mElements.p[i].mComponent.m_pPointer == p_WeaponProperties)
				{
					FastDelete(i);
					return true;
				}
			}

			return false;
		}
		
		bool RemoveWeapon(SimObject* p_Weapon)
		{
			for (uint32_t i = 0; mElements.size > i; ++i)
			{
				if (mElements.p[i].mComponent.m_pPointer && mElements.p[i].mComponent.m_pPointer->m_pSimObject == p_Weapon)
				{
					FastDelete(i);
					return true;
				}
			}

			return false;
		}
	};
}